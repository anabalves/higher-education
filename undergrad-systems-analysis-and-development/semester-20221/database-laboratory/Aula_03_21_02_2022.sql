/* Projeto Modelo de Dados CURSO */
/* 1) Criacao do banco CURSO */
create database AULA_03_21_02_2022;

/* 2) Conecta ao banco CURSO */
use AULA_03_21_02_2022;

/* 3) Criacao da tabela ESTADO */
create table TB_ESTADO (
    SIGLA_ESTADO char(2),
    NOME_ESTADO varchar(40)
);

/* 4) Criacao da tabela CLASSE */
create table TB_CLASSE (
    ID_CLASSE smallint,
    ID_ANDAR smallint
);

/* 5) Criacao da tabela PROFESSOR */
create table TB_PROFESSOR (
    ID_PROFESSOR char(3),
    NOME_PROFESSOR varchar(25)
);

/* 6) Criacao da tabela ALUNO */
create table TB_ALUNO (
    COD_ALUNO smallint,
    NOME_ALUNO varchar(45),
    END_ALUNO varchar(100),
    SIGLA_ESTADO char(2),  
    ID_CLASSE smallint
);

/* 7) Criacao da tabela DISCIPLINA */
create table TB_DISCIPLINA (
    ID_DISCIPLINA char(3),
    NOME_DISCIPLINA varchar(15),
    ID_PROFESSOR_DISCIPLINA char(3),
    NOTA_MINIMA_DISCIPLINA smallint
);

/* 8) Criacao da tabela ALUNO x DISCIPLINA */
create table TB_ALUNO_DISCIPLINA (
    COD_ALUNO smallint,
    ID_DISCIPLINA char(3),
    NOTA_ALUNO smallint
);

/* 9) Adicionar PK na tabela ESTADO */
ALTER TABLE TB_ESTADO
ADD CONSTRAINT PK_TB_ESTADO PRIMARY KEY (SIGLA_ESTADO);

/* 10) Adicionar PK na tabela CLASSE */
ALTER TABLE TB_CLASSE
ADD CONSTRAINT PK_TB_CLASSE PRIMARY KEY (ID_CLASSE);

/* 11) Adicionar PK na tabela PROFESSOR */
ALTER TABLE TB_PROFESSOR
ADD CONSTRAINT PK_TB_PROFESSOR PRIMARY KEY (ID_PROFESSOR);

/* 12) Adicionar PK na tabela ALUNO */
ALTER TABLE TB_ALUNO
ADD CONSTRAINT PK_TB_ALUNO PRIMARY KEY (COD_ALUNO);

/* 13) Adicionar PK na tabela DISCIPLINA */
ALTER TABLE TB_DISCIPLINA
ADD CONSTRAINT PK_TB_DISCIPLINA PRIMARY KEY (ID_DISCIPLINA);

/* 14) Adicionar FK na tabela ALUNO */
ALTER TABLE TB_ALUNO
ADD CONSTRAINT FK_TB_ALUNO_TB_ESTADO
FOREIGN KEY (SIGLA_ESTADO) REFERENCES TB_ESTADO(SIGLA_ESTADO);

ALTER TABLE TB_ALUNO
ADD CONSTRAINT FK_TB_ALUNO_TB_CLASSE
FOREIGN KEY (ID_CLASSE) REFERENCES TB_CLASSE(ID_CLASSE);

/* 15) Adicionar FK na tabela ALUNO_DISCIPLINA */
ALTER TABLE TB_ALUNO_DISCIPLINA
ADD CONSTRAINT FK_TB_ALUNO_DISCIPLINA_TB_ALUNO
FOREIGN KEY (COD_ALUNO) REFERENCES TB_ALUNO(COD_ALUNO);

ALTER TABLE TB_ALUNO_DISCIPLINA
ADD CONSTRAINT FK_TB_ALUNO_DISCIPLINA_TB_DISCIPLINA
FOREIGN KEY (ID_DISCIPLINA) REFERENCES TB_DISCIPLINA(ID_DISCIPLINA);

/* 16) Adicionar FK na tabela TB_DISCIPLINA */
ALTER TABLE TB_DISCIPLINA
ADD CONSTRAINT FK_TB_DISCIPLINA_TB_PROFESSOR
FOREIGN KEY (ID_PROFESSOR_DISCIPLINA) REFERENCES TB_PROFESSOR(ID_PROFESSOR);

/* 17) Inserir Dados Tabela ESTADO */
insert into TB_ESTADO(SIGLA_ESTADO, NOME_ESTADO) values ('SP', 'SÃ£o Paulo');

/* 18) Inserir Dados Tabela CLASSE */
insert into TB_CLASSE(ID_CLASSE, ID_ANDAR) values (1, 1), (2, 2), (3, 3); 

/* 19) Inserir Dados Tabela PROFESSOR */
insert into TB_PROFESSOR(ID_PROFESSOR, NOME_PROFESSOR) values 
('JOI', 'JOILSON CARDOSO'),
('OSE', 'OSEAS SANTANA'),
('VIT', 'VITOR VASCONCELOS'),
('FER', 'JOSE ROBERTO FERROLI'),
('LIM', 'VALMIR LIMA'),
('EDS', 'EDSON SILVA'),
('WAG', 'WAGNER OKIDA');

/* 20) Inserir Dados Tabela ALUNO */
insert into TB_ALUNO(COD_ALUNO, NOME_ALUNO, END_ALUNO, SIGLA_ESTADO, ID_CLASSE) values 
(1, 'ANTONIO CARLOS PENTEADO', 'RUA X', 'SP', '1'),
(2, 'AUROMIR DA SILVA VALDEVINO', 'RUA W', 'SP', '1'),
(3, 'ANDRE COSTA', 'RUA T', 'SP', '1'),
(4, 'ROBERTO SOARES DE MENEZES', 'RUA BW', 'SP', '2'),
(5, 'DANIA', 'RUA CCC', 'SP', '2'),
(6, 'CARLOS MAGALHAES', 'AV SP', 'SP', '2'),
(7, 'MARCELO RAUBA', 'AV SAO LUIS', 'SP', '3'),
(8, 'FERNANDO', 'AV COUNTYR', 'SP', '3'),
(9, 'WALMIR BURIN', 'RUA SSISIS', 'SP', '3');

/* 21) Inserir Dados Tabela DISCIPLINA */
insert into TB_DISCIPLINA 
(ID_DISCIPLINA, NOME_DISCIPLINA, ID_PROFESSOR_DISCIPLINA, NOTA_MINIMA_DISCIPLINA) values 
('MAT', 'MATEMATICA', 'JOI', 7),
('POR', 'PORTUGUES', 'VIT', 5),
('FIS', 'FISICA', 'OSE', 3),
('HIS', 'HISTORIA', 'EDS', 2),
('GEO', 'GEOGRAFIA', 'WAG', 4),
('ING', 'INGLES', 'LIM', 2);

/* 22) Inserir Dados Tabela ALUNO_DISCIPLINA */
insert into TB_ALUNO_DISCIPLINA (COD_ALUNO, ID_DISCIPLINA, NOTA_ALUNO) values
(1, 'MAT', 0),
(2, 'MAT', 0),
(3, 'MAT', 1),
(4, 'POR', 2),
(5, 'POR', 2),
(6, 'POR', 2),
(7, 'FIS', 3),
(8, 'FIS', 3),
(9, 'FIS', 3),
(1, 'POR', 2),
(2, 'POR', 2),
(7, 'POR', 2),
(1, 'FIS', 3);